{"remainingRequest":"C:\\Polybasic Disk\\University\\Graduation project\\springbootbeua19u3\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Polybasic Disk\\University\\Graduation project\\springbootbeua19u3\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\chat\\chat-add-or-update.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Polybasic Disk\\University\\Graduation project\\springbootbeua19u3\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\chat\\chat-add-or-update.vue","mtime":1713361872000},{"path":"C:\\Polybasic Disk\\University\\Graduation project\\springbootbeua19u3\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Polybasic Disk\\University\\Graduation project\\springbootbeua19u3\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Polybasic Disk\\University\\Graduation project\\springbootbeua19u3\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Polybasic Disk\\University\\Graduation project\\springbootbeua19u3\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogICAgaW1wb3J0IHN0b3JhZ2UgZnJvbSAiQC91dGlscy9zdG9yYWdlIjsNCiAgICBleHBvcnQgZGVmYXVsdCB7DQogICAgICAgIGRhdGEoKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIGlkOiAiIiwNCiAgICAgICAgICAgICAgICBydWxlRm9ybToge30sDQogICAgICAgICAgICAgICAgZGF0YUxpc3Q6IFtdLA0KICAgICAgICAgICAgICAgIHJ1bGVzOiB7DQogICAgICAgICAgICAgICAgICAgIHJlcGx5OiBbew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5Zue5aSN5YaF5a655LiN6IO95Li656m6IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgICAgICAgICAgICB9XQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgaW50ZXI6IG51bGwsDQogICAgICAgICAgICAgICAgbXlIZWFkZXJzOiB7fSwNCiAgICAgICAgICAgICAgICBhc2tTaG93OmZhbHNlDQogICAgICAgICAgICB9Ow0KICAgICAgICB9LA0KICAgICAgICBwcm9wczogWyJwYXJlbnQiXSwNCiAgICAgICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgICAgIGltZ1VybCgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kYmFzZS51cmwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBnZXRBY3Rpb25Vcmw6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIC8vIHJldHVybiBiYXNlLnVybCArIHRoaXMuYWN0aW9uICsgIj90b2tlbj0iICsgc3RvcmFnZS5nZXQoInRva2VuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAvJHt0aGlzLiRiYXNlLm5hbWV9L2AgKyAnZmlsZS91cGxvYWQnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBtb3VudGVkKCkgew0KICAgICAgICAgICAgdGhpcy5teUhlYWRlcnMgPSB7DQogICAgICAgICAgICAgICAgJ1Rva2VuJzogc3RvcmFnZS5nZXQoIlRva2VuIikNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbWV0aG9kczogew0KICAgICAgICAgICAgLy8g5Yid5aeL5YyWDQogICAgICAgICAgICBpbml0KGlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pZCA9IGlkOw0KICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsNCiAgICAgICAgICAgICAgICB0aGF0LmdldExpc3QoKTsNCiAgICAgICAgICAgICAgICB2YXIgaW50ZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRMaXN0KCk7DQogICAgICAgICAgICAgICAgfSwgNTAwMCkNCiAgICAgICAgICAgICAgICB0aGlzLmludGVyID0gaW50ZXI7DQogICAgICAgICAgICB9LA0KDQogICAgICAgICAgICBnZXRMaXN0KCkgew0KICAgICAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgICAgICAgICAgICAgIHNvcnQ6ICdhZGR0aW1lJywNCiAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICdhc2MnLA0KICAgICAgICAgICAgICAgICAgICBsaW1pdDogMTAwMA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLiRodHRwKHsNCiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLiRhcGkuY2hhdGJ5dXNlcmlkcGFnZSArIHRoaXMuaWQsDQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsDQogICAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zDQogICAgICAgICAgICAgICAgfSkudGhlbigoew0KICAgICAgICAgICAgICAgICAgICBkYXRhDQogICAgICAgICAgICAgICAgfSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnVsZUZvcm0udXNlcmlkID0gdGhpcy5pZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggaW4gZGF0YS5kYXRhLmxpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmxpc3RbeF0uYXNrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEubGlzdFt4XS5hc2suc3BsaXQoJy8nKS5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmxpc3RbeF0uYXNrLnNwbGl0KCcvJylbMF0gPT0gJ3VwbG9hZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEubGlzdFt4XS5pbWcgPSBkYXRhLmRhdGEubGlzdFt4XS5hc2sNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmxpc3RbeF0ucmVwbHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5saXN0W3hdLnJlcGx5LnNwbGl0KCcvJykubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5saXN0W3hdLnJlcGx5LnNwbGl0KCcvJylbMF0gPT0gJ3VwbG9hZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEubGlzdFt4XS5pbWcgPSBkYXRhLmRhdGEubGlzdFt4XS5yZXBseQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IGRhdGEuZGF0YS5saXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NoYXQtY29udGVudCcpWzBdDQogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGl2KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc2Nyb2xsVG9wID0gZGl2LnNjcm9sbEhlaWdodA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvLyDmj5DkuqQNCiAgICAgICAgICAgIG9uU3VibWl0KCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy4kYXBpLmNoYXRzYXZlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMucnVsZUZvcm0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhDQogICAgICAgICAgICAgICAgICAgICAgICB9KSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nOaIkOWKnyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLnJlcGx5ID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFza1Nob3cgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB1cGxvYWRTdWNjZXNzKHJlcykgew0KICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucnVsZUZvcm0pKQ0KDQogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5yZXBseSA9ICd1cGxvYWQvJyArIHJlcy5maWxlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAoew0KICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLiRhcGkuY2hhdHNhdmUsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHBhcmFtcw0KICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCh7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhDQogICAgICAgICAgICAgICAgICAgIH0pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5YqfIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLnJlcGx5ID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFza1Nob3cgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLy8g6L+U5ZueDQogICAgICAgICAgICBiYWNrKCkgew0KICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dGbGFnID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0RGF0YUxpc3QoKTsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnRlcikgew0KICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQo="},{"version":3,"sources":["chat-add-or-update.vue"],"names":[],"mappings":";AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chat-add-or-update.vue","sourceRoot":"src/views/modules/chat","sourcesContent":["<template>\r\n    <div>\r\n        <el-form\r\n            :style='{\"padding\":\"30px\",\"boxShadow\":\"0 0px 0px #999\",\"borderRadius\":\"6px\",\"background\":\"url(http://codegen.caihongy.cn/20221014/5e767dc0afa649ec9fbc71f9da086ab3.jpg)\"}'\r\n            class=\"add-update-preview\" ref=\"ruleForm\" :model=\"ruleForm\" :rules=\"rules\" label-width=\"80px\">\r\n            <div class=\"chat-content\" id=\"chat-content\">\r\n                <div v-bind:key=\"item.id\" v-for=\"item in dataList\">\r\n                    <div v-if=\"item.ask\" class=\"left-content\">\r\n                        <el-alert v-if=\"!item.img\" class=\"text-content\" :title=\"item.ask\" :closable=\"false\"\r\n                            type=\"success\"></el-alert>\r\n                        <el-image v-if=\"item.img\" :src=\"imgUrl + item.img\" style=\"width: 120px;margin: 10px;\"\r\n                            fit=\"scale-down\" :preview-src-list=\"[imgUrl + item.img]\"></el-image>\r\n                    </div>\r\n                    <div v-else class=\"right-content\">\r\n                        <el-alert v-if=\"!item.img\" class=\"text-content\" :title=\"item.reply\" :closable=\"false\"\r\n                            type=\"warning\"></el-alert>\r\n                        <el-image v-if=\"item.img\" :src=\"imgUrl + item.img\" style=\"width: 120px;margin: 10px;\"\r\n                            fit=\"scale-down\" :preview-src-list=\"[imgUrl + item.img]\"></el-image>\r\n                    </div>\r\n                    <div class=\"clear-float\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"clear-float\"></div>\r\n            <el-form-item :style='{\"margin\":\"0 0 20px 0\"}' label=\"回复\" prop=\"reply\">\r\n                <el-input v-model=\"ruleForm.reply\" placeholder=\"回复\" clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item :style='{\"padding\":\"0\",\"margin\":\"0 0 20px\"}'>\r\n                <div style=\"width: 100%;display: flex;align-items: center;\">\r\n                    <img style=\"width: 40px;cursor: pointer;margin-right: 10px;\" src=\"../../../assets/img/jiahao.png\" @click=\"askShow = !askShow\">\r\n                    <el-button\r\n                        :style='{\"border\":\"1px solid #5e9808\",\"cursor\":\"pointer\",\"padding\":\"0\",\"margin\":\"0 20px 0 0\",\"outline\":\"none\",\"color\":\"rgba(255, 255, 255, 1)\",\"borderRadius\":\"4px\",\"background\":\"-webkit-linear-gradient(top,#96d148,#4a7f06)\",\"width\":\"128px\",\"lineHeight\":\"40px\",\"fontSize\":\"14px\",\"height\":\"40px\"}'\r\n                        type=\"primary\" @click=\"onSubmit\">回复</el-button>\r\n                    <el-button\r\n                        :style='{\"border\":\"1px solid #ccc\",\"cursor\":\"pointer\",\"padding\":\"0\",\"margin\":\"0 0\",\"outline\":\"none\",\"color\":\"#5b8020\",\"borderRadius\":\"4px\",\"background\":\"-webkit-linear-gradient(top,#fff,#ccc)\",\"width\":\"128px\",\"lineHeight\":\"40px\",\"fontSize\":\"14px\",\"height\":\"40px\"}'\r\n                        @click=\"back()\">返回</el-button>\r\n                </div>\r\n                \r\n            </el-form-item>\r\n            <el-form-item v-if=\"askShow\" :style='{\"padding\":\"0 0 0 50px\",\"margin\":\"0\"}'>\r\n                <el-upload class=\"upload-demo\" :action=\"getActionUrl\" :on-success=\"uploadSuccess\"\r\n                    :show-file-list=\"false\">\r\n                    <el-button\r\n                        :style='{\"border\":\"1px solid #5e9808\",\"cursor\":\"pointer\",\"padding\":\"0\",\"margin\":\"0 20px 0 0\",\"outline\":\"none\",\"color\":\"rgba(255, 255, 255, 1)\",\"borderRadius\":\"4px\",\"background\":\"-webkit-linear-gradient(top,#96d148,#4a7f06)\",\"width\":\"128px\",\"lineHeight\":\"40px\",\"fontSize\":\"14px\",\"height\":\"40px\"}'\r\n                        type=\"primary\">上传图片</el-button>\r\n                </el-upload>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\n    import storage from \"@/utils/storage\";\r\n    export default {\r\n        data() {\r\n            return {\r\n                id: \"\",\r\n                ruleForm: {},\r\n                dataList: [],\r\n                rules: {\r\n                    reply: [{\r\n                        required: true,\r\n                        message: \"回复内容不能为空\",\r\n                        trigger: \"blur\"\r\n                    }]\r\n                },\r\n                inter: null,\r\n                myHeaders: {},\r\n                askShow:false\r\n            };\r\n        },\r\n        props: [\"parent\"],\r\n        computed: {\r\n            imgUrl() {\r\n                return this.$base.url\r\n            },\r\n            getActionUrl: function() {\r\n                // return base.url + this.action + \"?token=\" + storage.get(\"token\");\r\n                return `/${this.$base.name}/` + 'file/upload';\r\n            }\r\n        },\r\n        mounted() {\r\n            this.myHeaders = {\r\n                'Token': storage.get(\"Token\")\r\n            }\r\n        },\r\n        methods: {\r\n            // 初始化\r\n            init(id) {\r\n                this.id = id;\r\n                var that = this;\r\n                that.getList();\r\n                var inter = setInterval(function() {\r\n                    that.getList();\r\n                }, 5000)\r\n                this.inter = inter;\r\n            },\r\n\r\n            getList() {\r\n                let params = {\r\n                    sort: 'addtime',\r\n                    order: 'asc',\r\n                    limit: 1000\r\n                }\r\n                this.$http({\r\n                    url: this.$api.chatbyuseridpage + this.id,\r\n                    method: \"get\",\r\n                    params: params\r\n                }).then(({\r\n                    data\r\n                }) => {\r\n                    if (data && data.code === 0) {\r\n                        this.ruleForm.userid = this.id;\r\n                        for (let x in data.data.list) {\r\n                            if (data.data.list[x].ask) {\r\n                                if (data.data.list[x].ask.split('/').length > 1) {\r\n                                    if (data.data.list[x].ask.split('/')[0] == 'upload') {\r\n                                        data.data.list[x].img = data.data.list[x].ask\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (data.data.list[x].reply) {\r\n                                if (data.data.list[x].reply.split('/').length > 1) {\r\n                                    if (data.data.list[x].reply.split('/')[0] == 'upload') {\r\n                                        data.data.list[x].img = data.data.list[x].reply\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        this.dataList = data.data.list;\r\n                        let div = document.getElementsByClassName('chat-content')[0]\r\n                        setTimeout(() => {\r\n                            if (div)\r\n                                div.scrollTop = div.scrollHeight\r\n                        }, 100)\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                });\r\n            },\r\n            // 提交\r\n            onSubmit() {\r\n                this.$refs[\"ruleForm\"].validate(valid => {\r\n                    if (valid) {\r\n                        this.$http({\r\n                            url: this.$api.chatsave,\r\n                            method: \"post\",\r\n                            data: this.ruleForm\r\n                        }).then(({\r\n                            data\r\n                        }) => {\r\n                            if (data && data.code === 0) {\r\n                                this.$message({\r\n                                    message: \"操作成功\",\r\n                                    type: \"success\",\r\n                                    duration: 1500,\r\n                                    onClose: () => {\r\n                                        this.getList();\r\n                                        this.ruleForm.reply = \"\";\r\n                                    }\r\n                                });\r\n                            } else {\r\n                                this.$message.error(data.msg);\r\n                            }\r\n                            this.askShow = false\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n            uploadSuccess(res) {\r\n                if (res.code == 0) {\r\n                    let params = JSON.parse(JSON.stringify(this.ruleForm))\r\n\r\n                    params.reply = 'upload/' + res.file\r\n                    this.$http({\r\n                        url: this.$api.chatsave,\r\n                        method: \"post\",\r\n                        data: params\r\n                    }).then(({\r\n                        data\r\n                    }) => {\r\n                        if (data && data.code === 0) {\r\n                            this.$message({\r\n                                message: \"操作成功\",\r\n                                type: \"success\",\r\n                                duration: 1500,\r\n                                onClose: () => {\r\n                                    this.getList();\r\n                                    this.ruleForm.reply = \"\";\r\n                                }\r\n                            });\r\n                        } else {\r\n                            this.$message.error(data.msg);\r\n                        }\r\n                        this.askShow = false\r\n                    });\r\n                }\r\n            },\r\n            // 返回\r\n            back() {\r\n                this.parent.showFlag = false;\r\n                this.parent.getDataList();\r\n                if (this.inter) {\r\n                    clearInterval(this.inter);\r\n                }\r\n            }\r\n        }\r\n    };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .chat-content {\r\n        margin-left: 80px;\r\n        padding-bottom: 20px;\r\n        width: 500px;\r\n        margin-bottom: 30px;\r\n        max-height: 300px;\r\n        height: 300px;\r\n        overflow-y: scroll;\r\n        border: 1px solid #eeeeee;\r\n        background: #fff;\r\n\r\n        .left-content {\r\n            float: left;\r\n            margin-bottom: 10px;\r\n            padding: 10px;\r\n        }\r\n\r\n        .right-content {\r\n            float: right;\r\n            margin-bottom: 10px;\r\n            padding: 10px;\r\n        }\r\n    }\r\n\r\n    .clear-float {\r\n        clear: both;\r\n    }\r\n\r\n    .detail-form-content {\r\n        background-color: transparent;\r\n    }\r\n\r\n    .el-date-editor.el-input {\r\n        width: auto;\r\n    }\r\n\r\n    .add-update-preview .el-form-item /deep/ .el-form-item__label {\r\n        padding: 0 10px 0 0;\r\n        text-shadow: 0 1px 10px #fff;\r\n        color: #699620;\r\n        width: 80px;\r\n        font-size: 14px;\r\n        line-height: 40px;\r\n        text-align: right;\r\n    }\r\n\r\n    .add-update-preview .el-form-item /deep/ .el-form-item__content {\r\n        margin-left: 80px;\r\n    }\r\n\r\n    .add-update-preview .el-input /deep/ .el-input__inner {\r\n        border: 0;\r\n        border-radius: 4px;\r\n        padding: 0 12px;\r\n        box-shadow: 0 0 1px #4b681d;\r\n        outline: none;\r\n        color: #00a9aa;\r\n        width: 400px;\r\n        font-size: 14px;\r\n        height: 40px;\r\n    }\r\n\r\n    .add-update-preview .el-select /deep/ .el-input__inner {\r\n        border: 0;\r\n        border-radius: 4px;\r\n        padding: 0 10px;\r\n        box-shadow: 0 0 1px #4b681d;\r\n        outline: none;\r\n        color: #00a9aa;\r\n        width: 200px;\r\n        font-size: 14px;\r\n        height: 40px;\r\n    }\r\n\r\n    .add-update-preview .el-date-editor /deep/ .el-input__inner {\r\n        border: 0;\r\n        border-radius: 4px;\r\n        padding: 0 10px 0 30px;\r\n        box-shadow: 0 0 1px #4b681d;\r\n        outline: none;\r\n        color: #00a9aa;\r\n        width: 200px;\r\n        font-size: 14px;\r\n        height: 40px;\r\n    }\r\n\r\n    .add-update-preview /deep/ .el-upload--picture-card {\r\n        background: transparent;\r\n        border: 0;\r\n        border-radius: 0;\r\n        width: auto;\r\n        height: auto;\r\n        line-height: initial;\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .add-update-preview /deep/ .upload .upload-img {\r\n        border: 1px dashed #fff;\r\n        cursor: pointer;\r\n        border-radius: 6px;\r\n        color: #fff;\r\n        width: 200px;\r\n        font-size: 32px;\r\n        line-height: 100px;\r\n        text-align: center;\r\n        height: 100px;\r\n    }\r\n\r\n    .add-update-preview /deep/ .el-upload-list .el-upload-list__item {\r\n        border: 1px dashed #fff;\r\n        cursor: pointer;\r\n        border-radius: 6px;\r\n        color: #fff;\r\n        width: 200px;\r\n        font-size: 32px;\r\n        line-height: 100px;\r\n        text-align: center;\r\n        height: 100px;\r\n    }\r\n\r\n    .add-update-preview /deep/ .el-upload .el-icon-plus {\r\n        border: 1px dashed #fff;\r\n        cursor: pointer;\r\n        border-radius: 6px;\r\n        color: #fff;\r\n        width: 200px;\r\n        font-size: 32px;\r\n        line-height: 100px;\r\n        text-align: center;\r\n        height: 100px;\r\n    }\r\n\r\n    .add-update-preview .el-textarea /deep/ .el-textarea__inner {\r\n        border: 0;\r\n        border-radius: 4px;\r\n        padding: 12px;\r\n        box-shadow: 0 0 1px #4b681d;\r\n        outline: none;\r\n        color: #00a9aa;\r\n        width: 400px;\r\n        font-size: 14px;\r\n        height: auto;\r\n    }\r\n</style>\r\n"]}]}